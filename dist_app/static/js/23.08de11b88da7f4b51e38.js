webpackJsonp([23],{FOSC:function(t,e){},KbcM:function(t,e){},axEM:function(t,e){},vyKm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("2sLL"),i=(Boolean,Boolean,Boolean,{name:"x-table",props:{fullBordered:Boolean,cellBordered:{type:Boolean,default:!0},contentBordered:{type:Boolean,default:!0}}}),o={render:function(){var t=this.$createElement;return(this._self._c||t)("table",{staticClass:"vux-table",class:{"vux-table-bordered":this.fullBordered,"vux-table-no-cell-bordered":!this.cellBordered,"vux-table-no-content-bordered":!this.contentBordered}},[this._t("default")],2)},staticRenderFns:[]};var s=a("VU/8")(i,o,!1,function(t){a("KbcM")},null,null).exports,l=a("oWtu"),r=(l.a,Boolean,String,{name:"check-icon",components:{Icon:l.a},methods:{updateValue:function(){this.$emit("update:value",!this.value)}},props:{value:{type:Boolean,default:!1},type:{type:String,default:"default"}}}),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vux-check-icon",on:{click:t.updateValue}},[a("icon",{directives:[{name:"show",rawName:"v-show",value:"default"===t.type&&t.value,expression:"type === 'default' && value"}],attrs:{type:"success"}}),t._v(" "),a("icon",{directives:[{name:"show",rawName:"v-show",value:"plain"===t.type&&t.value,expression:"type === 'plain' && value"}],attrs:{type:"success_circle"}}),t._v(" "),a("icon",{directives:[{name:"show",rawName:"v-show",value:!t.value,expression:"!value"}],attrs:{type:"circle"}}),t._v(" "),a("span",[t._t("default")],2)],1)},staticRenderFns:[]};var c=a("VU/8")(r,u,!1,function(t){a("axEM")},null,null).exports,d=(n.a,{name:"AllocationMaterialDetail",components:{XButton:n.a,XTable:s,CheckIcon:c},data:function(){return{equipmentDetailData:{}}},mounted:function(){this.$emit("setHeaderShow",{blod:!0,title:"物料归还"}),this.$route.query.flag?this.getMaterialEngineer_testallotDetail():this.getMaterialEngineer_maintainallotDetail()},methods:{goMeasureFlow:function(){this.$router.push({name:"measureFlow"})},getMaterialEngineer_testallotDetail:function(){var t=this;this.$vux.loading.show(),this.$http.get(this.$conf.env.getMaterialEngineer_testallotDetail+this.$route.query.projectID+"/").then(function(e){t.equipmentDetailData=e.data,t.$vux.loading.hide()}).catch(function(e){t.$vux.loading.hide(),t.$vux.toast.text(e.response?e.response.data:"服务器错误","top")})},setMaterialEngineer_testallot:function(){var t=this,e=[];this.equipmentDetailData.boms.length&&this.equipmentDetailData.boms.forEach(function(t){var a={is_return:!!t.is_return,id:t.id};a.is_return&&e.push(a)}),this.$vux.loading.show(),this.$http.put(this.$conf.env.setMaterialEngineer_testallot+this.$route.query.projectID+"/",{experiment_boms:e}).then(function(e){"200"==e.status?(t.$vux.toast.text("分配成功"),setTimeout(function(){t.setMaterialEngineer_testallot()},100)):t.$vux.toast.text("分配失败"),t.$vux.loading.hide()}).catch(function(e){t.$vux.loading.hide(),t.$vux.toast.text(e.response?e.response.data:"服务器错误","top")})},getMaterialEngineer_maintainallotDetail:function(){var t=this;this.$vux.loading.show(),this.$http.get(this.$conf.env.getMaterialEngineer_maintainallotDetail+this.$route.query.projectID+"/").then(function(e){e.data.experiment_num=e.data.num,e.data.boms=e.data.servicetools,t.equipmentDetailData=e.data,t.$vux.loading.hide()}).catch(function(e){t.$vux.loading.hide(),t.$vux.toast.text(e.response?e.response.data:"服务器错误","top")})},setMaterialEngineer_maintainallot:function(){var t=this,e=[];this.equipmentDetailData.boms.length&&this.equipmentDetailData.boms.forEach(function(t){var a={is_return:!!t.is_return,id:t.id};a.is_return&&e.push(a)}),this.$vux.loading.show(),this.$http.put(this.$conf.env.setMaterialEngineer_maintainallot+this.$route.query.projectID+"/",{servicetools:e}).then(function(e){"200"==e.status?(t.$vux.toast.text("分配成功"),setTimeout(function(){t.getMaterialEngineer_maintainallotDetail()},100)):t.$vux.toast.text("分配失败"),t.$vux.loading.hide()}).catch(function(e){t.$vux.loading.hide(),t.$vux.toast.text(e.response?e.response.data:"服务器错误","top")})}}}),v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AllocationMaterialDetail body_main"},[a("div",{staticClass:"from"},[a("ul",{staticClass:"equipmentInfo margin_bottom"},[a("li",{staticClass:"vux-1px-b",on:{click:function(e){return t.goMeasureFlow()}}},[a("span",[t._v("设备名称")]),t._v(" "),a("span",[t._v(t._s(t.equipmentDetailData.name))])]),t._v(" "),a("li",{on:{click:function(e){return t.goMeasureFlow()}}},[a("span",[t._v("设备编号")]),t._v(" "),a("span",[t._v(t._s(t.equipmentDetailData.experiment_num))])])]),t._v(" "),a("div",{staticClass:"table_scroll"},[a("x-table",{staticStyle:{"background-color":"#fff"},attrs:{"cell-bordered":!1,"content-bordered":!1}},[a("thead",[a("tr",{staticStyle:{"background-color":"#eee"}},[a("th",[t._v("物料名称")]),t._v(" "),a("th",[t._v("数量")]),t._v(" "),a("th",[t._v("归还")])])]),t._v(" "),a("tbody",[t._l(t.equipmentDetailData.boms,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.num))]),t._v(" "),a("td",[a("check-icon",{attrs:{value:e.is_return},on:{"update:value":function(a){return t.$set(e,"is_return",a)}}})],1)])}),t._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:0==t.equipmentDetailData.boms.length,expression:"equipmentDetailData.boms.length == 0"}]},[a("td",{attrs:{colspan:"3"}},[t._v("暂无数据")])])],2)])],1)]),t._v(" "),a("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.$route.query.flag?t.setMaterialEngineer_testallot():t.setMaterialEngineer_maintainallot()}}},[t._v("分配")])],1)},staticRenderFns:[]};var h=a("VU/8")(d,v,!1,function(t){a("FOSC")},null,null);e.default=h.exports}});
//# sourceMappingURL=23.08de11b88da7f4b51e38.js.map
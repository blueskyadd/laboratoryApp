webpackJsonp([56],{"95mc":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("2sLL"),a=(n.a,{name:"MaterialReturnForm",components:{XButton:n.a},data:function(){return{equipmentDetailData:{},isHidebutton:!0,innerHeight:window.innerHeight,heightChange:window.innerHeight}},mounted:function(){var t=this;this.$emit("setHeaderShow",{blod:!0,title:"物料归还"}),this.$route.query.flag?this.getMaterialEngineer_testbackDetail():this.getMaterialEngineer_maintainbackDetail();window.onresize=function(){t.innerHeight=window.innerHeight}},watch:{innerHeight:function(t,e){this.heightChange!=t?this.isHidebutton=!1:this.isHidebutton=!0}},methods:{goMeasureFlow:function(){this.$router.push({name:"measureFlow"})},getMaterialEngineer_testbackDetail:function(){var t=this;this.$vux.loading.show(),this.$http.get(this.$conf.env.getMaterialEngineer_testbackDetail+this.$route.query.projectID+"/").then(function(e){e.data.num=e.data.experiment_num,e.data.servicetools=e.data.boms,t.equipmentDetailData=e.data,t.$vux.loading.hide()}).catch(function(e){t.$vux.loading.hide(),t.$vux.toast.text(e.response?e.response.data:"服务器错误","top")})},getMaterialEngineer_maintainbackDetail:function(){var t=this;this.$vux.loading.show(),this.$http.get(this.$conf.env.getMaterialEngineer_maintainbackDetail+this.$route.query.projectID+"/").then(function(e){t.equipmentDetailData=e.data,t.$vux.loading.hide()}).catch(function(e){t.$vux.loading.hide(),t.$vux.toast.text(e.response?e.response.data:"服务器错误","top")})},setMaterialEngineer_testback:function(){var t=this;this.VerificationData()&&(this.$vux.loading.show(),this.$http.put(this.$conf.env.setMaterialEngineer_maintainback+this.$route.query.projectID+"/",{experiment_boms:this.VerificationData()}).then(function(e){"200"==e.status?(t.$vux.toast.text("提交成功"),setTimeout(function(){t.getMaterialEngineer_maintainbackDetail()},100)):t.$vux.toast.text("提交失败"),t.$vux.loading.hide()}).catch(function(e){t.$vux.loading.hide(),t.$vux.toast.text(e.response?e.response.data:"服务器错误","top")}))},setMaterialEngineer_maintainback:function(){var t=this;this.VerificationData()&&(this.$vux.loading.show(),this.$http.put(this.$conf.env.setMaterialEngineer_maintainback+this.$route.query.projectID+"/",{servicetools:this.VerificationData()}).then(function(e){"200"==e.status?(t.$vux.toast.text("提交成功"),setTimeout(function(){t.getMaterialEngineer_maintainbackDetail()},100)):t.$vux.toast.text("提交失败"),t.$vux.loading.hide()}).catch(function(e){t.$vux.loading.hide(),t.$vux.toast.text(e.response?e.response.data:"服务器错误","top")}))},VerificationData:function(){var t=[];return this.equipmentDetailData.servicetools.length?(this.equipmentDetailData.servicetools.forEach(function(e){var i={record_num:e.record_num,id:e.id};e.record_num&&t.push(i)}),t.length?t:(this.$vux.toast.text("您一个数量也没有输入呢"),!1)):(this.$vux.toast.text("没有需要归还的物料"),!1)}}}),o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"MaterialReturnForm body_main"},[i("div",{staticClass:"from"},[i("ul",{staticClass:"equipmentInfo margin_bottom"},[i("li",{staticClass:"vux-1px-b",on:{click:function(e){return t.goMeasureFlow()}}},[i("span",[t._v("设备名称")]),t._v(" "),i("span",[t._v(t._s(t.equipmentDetailData.name))])]),t._v(" "),i("li",{on:{click:function(e){return t.goMeasureFlow()}}},[i("span",[t._v("设备编号")]),t._v(" "),i("span",[t._v(t._s(t.equipmentDetailData.num))])])]),t._v(" "),i("ul",{staticClass:"equipmentFrom"},t._l(t.equipmentDetailData.servicetools,function(e){return i("li",{key:e.id,staticClass:"vux-1px-b"},[i("span",[t._v(t._s(e.name))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.record_num,expression:"item.record_num"}],attrs:{type:"number",placeholder:"请输入归还数量"},domProps:{value:e.record_num},on:{input:function(i){i.target.composing||t.$set(e,"record_num",i.target.value)}}})])}),0)]),t._v(" "),i("x-button",{directives:[{name:"show",rawName:"v-show",value:t.isHidebutton,expression:"isHidebutton"}],attrs:{type:"primary"},nativeOn:{click:function(e){t.$route.query.flag?t.setMaterialEngineer_testback():t.setMaterialEngineer_maintainback()}}},[t._v("确定")])],1)},staticRenderFns:[]};var s=i("VU/8")(a,o,!1,function(t){i("zlie")},null,null);e.default=s.exports},zlie:function(t,e){}});
//# sourceMappingURL=56.7299ac0c1f9b884be7c9.js.map
{"version":3,"sources":["webpack:///./src/view/Testengineer/malfunction/MalfunctionCause.vue","webpack:///./src/view/Testengineer/malfunction/MalfunctionCause.vue?4be0","webpack:///./src/view/Testengineer/malfunction/MalfunctionCause.vue?a2c9"],"names":["malfunction_MalfunctionCause","XButton","Search","name","components","data","startTime","startEnd","results","value","equipmentDetail","num","device_keeper","room","isHidebutton","innerHeight","window","heightChange","isMoremaintainrecord","MoremaintainrecordNumber","page_size","searchText","watch","newval","oldval","this","mounted","_this","$emit","blod","title","onresize","$store","state","alarm","id","document","getElementsByClassName","addEventListener","e","target","scrollHeight","offsetHeight","scrollTop","searchTestengineer_searcheqList","searchHeight","searchTop","getElementById","headerTop","style","top","$StatusbarHeight","methods","resultClick","item","getResult","val","_this2","$vux","loading","show","$http","get","$conf","env","then","res","next","forEach","Element","concat","hide","catch","err","toast","text","response","goMeasureFlow","$router","push","changeMaterial","console","log","changeMaterialPoduct","goSynopsis","params","flag","commit","createdTestengineer_alarm","_this3","synopsis","MalfunctionCause","post","equipment","cause","status","setTimeout","back","beforeRouteLeave","to","from","Testengineer_malfunction_MalfunctionCause","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","padding-right","attrs","_v","ref","placeholder","position","auto-scroll-to-top","on","result-click","on-change","model","callback","$$v","$set","expression","_s","click","$event","directives","rawName","type","nativeOn","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/72.6b3463284453dade40de.js","sourcesContent":["\nimport XButton from 'vux/src/components/x-button/index.vue'\nimport Search from 'vux/src/components/search/index.vue'\n\nexport default {\nname:'MalfunctionCause',\ncomponents: {XButton, Search },\ndata(){\nreturn{\nstartTime:'',\nstartEnd: '',\nresults:[],\nvalue:'',\nequipmentDetail:{\n'name':'设备名称',\n'num':'',\n'device_keeper':'负责人',\n'room':'实验室'\n},\nisHidebutton:true,//键盘弹出时，底部按钮隐藏\ninnerHeight:window.innerHeight,//监听页面高度变化所用参数\nheightChange:window.innerHeight,\nisMoremaintainrecord: true,//搜索数据上拉加载\nMoremaintainrecordNumber: 1,//搜索数据上拉加载页数\npage_size: 15,\nsearchText:''\n}\n},\nwatch: {\ninnerHeight(newval,oldval){\nif(this.heightChange != newval){\nthis.isHidebutton = false\n}else{\nthis.isHidebutton = true\n}\n},\n},\nmounted(){\nthis.$emit('setHeaderShow', {blod:true,title: '新增报警'});\n/**@name 监听页面高度变化 */\nconst that = this;\nwindow.onresize =()  =>{\nreturn (()=>{\nthis.innerHeight = window.innerHeight\n})()\n}\n/**@name 当前选择数据 */\nif(this.$store.state.alarm.equipmentDetail.id){\nthis.equipmentDetail = this.$store.state.alarm.equipmentDetail;\n};\n/**@name 监听搜索数据加载 */\nvar scrollBox = document.getElementsByClassName('vux-search_show')[0]\nscrollBox.addEventListener('scroll',(e)=>{\nif(e.target.scrollHeight - e.target.offsetHeight < e.target.scrollTop + 20 && this.isMoremaintainrecord){\nthis.isMoremaintainrecord = false;\nthis.MoremaintainrecordNumber += 1;\nthis.searchTestengineer_searcheqList()\n}\n});\nvar searchHeight = document.getElementsByClassName('weui-cells')[0];\nvar searchTop = document.getElementById('searchTop').offsetHeight;\nvar headerTop = document.getElementsByClassName('vux-header-title')[0].offsetHeight;\nsearchHeight.style.top = searchTop + headerTop + this.$StatusbarHeight + 1+ 'px'\n},\nmethods:{\nresultClick (item) {\nthis.equipmentDetail = item;\n},\ngetResult (val) {\nthis.MoremaintainrecordNumber = 1;\nthis.searchText = val;\nthis.searchTestengineer_searcheqList();\n\n},\nsearchTestengineer_searcheqList(){\nthis.$vux.loading.show();\nthis.$http.get(this.MoremaintainrecordNumber==1?this.$conf.env.searchTestengineer_searcheqList + this.searchText +'&page_size=' + this.page_size:this.$conf.env.searchTestengineer_searcheqList + this.searchText +'&page_size=' + this.page_size + '&p=' +this.MoremaintainrecordNumber).then(res =>{\nthis.isMoremaintainrecord = res.data.next ? true : false;\nif(res.data.results){\nres.data.results.forEach( Element =>{\nElement.title = Element.name;\nElement.value = Element.id;\n})\nthis.results = this.MoremaintainrecordNumber == 1 ? res.data.results:this.results.concat(res.data.results);\n}\nthis.$vux.loading.hide();\n}).catch(err =>{\nthis.$vux.loading.hide();\nthis.isMoremaintainrecord = false;\nthis.$vux.toast.text(err.response?err.response.data:'服务器错误', 'top');\n})\n},\ngoMeasureFlow(){\nthis.$router.push({name:'measureFlow'});\n\n},\nchangeMaterial(data){\nconsole.log(data,1)\n},\nchangeMaterialPoduct(data){\nconsole.log(data)\n},\ngoSynopsis(){\nthis.$router.push({name:'Synopsis',params:{flag:'3'}});\nthis.$store.commit('changeDetail',this.equipmentDetail)\n},\ncreatedTestengineer_alarm(){\nconsole.log(this.$store.state.synopsis.MalfunctionCause)\nif(!this.equipmentDetail.id){\nthis.$vux.toast.text('请先选择设备');\n\n}else if(!this.$store.state.synopsis.MalfunctionCause){\nthis.$vux.toast.text('请先输入报警原因');\n}else{\nthis.$vux.loading.show();\nthis.$http.post(this.$conf.env.createdTestengineer_alarm,{'equipment':this.equipmentDetail.id,'cause':this.$store.state.synopsis.MalfunctionCause}).then(res =>{\nif(res.status == '201'){\nthis.$vux.toast.text('提交成功');\nsetTimeout(()=>{\nthis.$router.back();\n},100)\n}else{\nthis.$vux.toast.text('提交失败');\n}\nthis.$vux.loading.hide();\n}).catch(err =>{\nthis.$vux.loading.hide();\nthis.$vux.toast.text(err.response?err.response.data:'服务器错误', 'top');\n})\n}\n}\n},\nbeforeRouteLeave (to, from, next) {\nconsole.log(to)\nif(to.name == 'Malfunction'){\nthis.$store.commit('changeDetail',{});\nthis.$store.commit('changeSynopsisText',{name:'',flag:'3'})\n}\nnext()\n}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/view/Testengineer/malfunction/MalfunctionCause.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"MalfunctionCause body_main\"},[_c('div',{staticClass:\"from\"},[_c('ul',{staticClass:\"equipmentInfo margin_bottom\"},[_c('li',{staticClass:\"vux-1px-b\",staticStyle:{\"padding-right\":\"0\"},attrs:{\"id\":\"searchTop\"}},[_c('span',[_vm._v(\"设备编号\")]),_vm._v(\" \"),_c('search',{ref:\"search\",attrs:{\"placeholder\":\"请输入设备编号\",\"results\":_vm.results,\"position\":\"absolute\",\"auto-scroll-to-top\":\"\",\"top\":\"66\"},on:{\"result-click\":_vm.resultClick,\"on-change\":_vm.getResult},model:{value:(_vm.equipmentDetail.num),callback:function ($$v) {_vm.$set(_vm.equipmentDetail, \"num\", $$v)},expression:\"equipmentDetail.num\"}})],1),_vm._v(\" \"),_c('li',[_c('span',[_vm._v(\"设备名称\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.equipmentDetail.name))])])]),_vm._v(\" \"),_c('ul',{staticClass:\" equipmentInfo margin_bottom\"},[_c('li',{staticClass:\"changeList vux-1px-b\"},[_c('span',[_vm._v(\"实验室\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.equipmentDetail.room))])]),_vm._v(\" \"),_c('li',{staticClass:\"changeList\"},[_c('span',[_vm._v(\"负责人\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.equipmentDetail.device_keeper))])])]),_vm._v(\" \"),_c('ul',{staticClass:\"equipmentInfo \"},[_c('li',{on:{\"click\":function($event){return _vm.goSynopsis()}}},[_c('span',[_vm._v(\"报警原因\")]),_vm._v(\" \"),_c('span',{staticClass:\"MalfunctionCauseText\"},[_c('p',[_vm._v(_vm._s(_vm.$store.state.synopsis.MalfunctionCause ||  '请编辑'))]),_c('div',{staticClass:\"weui-cell__ft\"})])])])]),_vm._v(\" \"),_c('x-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isHidebutton),expression:\"isHidebutton\"}],attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.createdTestengineer_alarm()}}},[_vm._v(\"申请\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6615fc8d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/Testengineer/malfunction/MalfunctionCause.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6615fc8d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vux-loader/src/style-loader.js!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MalfunctionCause.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vux-loader/src/script-loader.js!../../../../node_modules/vux-loader/src/script-loader.js!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MalfunctionCause.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vux-loader/src/script-loader.js!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MalfunctionCause.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6615fc8d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../../node_modules/vux-loader/src/template-loader.js!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./MalfunctionCause.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/Testengineer/malfunction/MalfunctionCause.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
webpackJsonp([84],{Gk0H:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("HY5T"),i=(o.a,{name:"projectAllocation",components:{popupPicker:o.a},data:function(){return{popupObj:{placeholderTitle:"选择负责人",popupTitle:"项目分配",popupList:[],activelyData:[]},Labmanage_projectDetailList:[]}},mounted:function(){this.$emit("setHeaderShow",{blod:!0,title:"项目分配"}),this.getLabmanage_projectDetailList()},methods:{goProjectSelectDetail:function(t){this.$router.push({name:"projectSelectDetail",query:{projectName:t.name,projectID:t.id}})},getLabmanage_projectDetailList:function(){var t=this;this.$vux.loading.show(),this.$http.get(this.$conf.env.getLabmanage_projectDetailList+this.$route.query.projectID+"/").then(function(e){t.Labmanage_projectDetailList=e.data.experiments,t.disabled=!!e.data.project_leader,t.popupObj.placeholderTitle=e.data.project_leader?e.data.project_leader:"选择负责人",!e.data.project_leader&&t.getLabmanage_projectEngineerList(),t.$vux.loading.hide()}).catch(function(e){t.$vux.loading.hide(),t.$vux.toast.text(e.response?e.response.data:"服务器错误","top")})},getLabmanage_projectEngineerList:function(t){var e=this;this.$http.get(this.$conf.env.getLabmanage_projectEngineerList).then(function(t){0!=t.data.length&&(t.data.forEach(function(t){t.value=t.id.toString()}),e.popupObj.popupList=t.data)}).catch(function(t){e.$vux.toast.text(t.response?t.response.data:"服务器错误","top")})},setActivelyData:function(t){this.popupObj.activelyData=t},allocationLabmanage_projectLeader:function(){var t=this;this.disabled?this.$vux.toast.text("该项目已分配负责人"):this.popupObj.activelyData.length?this.$http.put(this.$conf.env.allocationLabmanage_projectLeader+this.$route.query.projectID+"/",{project_leader:this.popupObj.activelyData[0]-0}).then(function(e){"200"==e.status?(t.$vux.toast.text("分配成功"),t.$router.back()):t.$vux.toast.text("分配失败")}).catch(function(e){t.$vux.toast.text(e.response?e.response.data:"服务器错误")}):this.$vux.toast.text("请选择项目负责人")}}}),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"projectAllocation body_main"},[a("popup-picker",{attrs:{placeholderTitle:t.popupObj.placeholderTitle,disabled:t.disabled,popupTitle:t.popupObj.popupTitle,popupList:t.popupObj.popupList,activelyData:t.popupObj.activelyData},on:{changeData:t.setActivelyData}}),t._v(" "),a("div",{staticClass:"projectAllocation_list"},[a("ul",t._l(t.Labmanage_projectDetailList,function(e,o){return a("li",{key:e,class:o==t.Labmanage_projectDetailList.length-1?"":"vux-1px-b",on:{click:function(a){return t.goProjectSelectDetail(e)}}},[a("span",[t._v(t._s(e.name))]),t._v(" "),a("span",{staticClass:"weui-cell__ft"})])}),0)]),t._v(" "),a("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.allocationLabmanage_projectLeader()}}},[t._v("确定")])],1)},staticRenderFns:[]};var p=a("VU/8")(i,n,!1,function(t){a("HhcT")},"data-v-3e8193ec",null);e.default=p.exports},HhcT:function(t,e){}});
//# sourceMappingURL=84.8b6ef61ebd941c9a6622.js.map
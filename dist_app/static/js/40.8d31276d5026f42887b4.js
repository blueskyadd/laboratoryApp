webpackJsonp([40],{YHVP:function(t,a){},rnKG:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("7biW"),s=e("Q6Ck"),n=e("odqc"),l=e("Znkm"),r=e("fBcm"),o=e("b+jt"),c=(i.a,s.a,n.a,l.a,r.a,o.a,{name:"AllocationMaterial",components:{Search:i.a,mainList:s.a,Tab:n.a,TabItem:l.a,Swiper:r.a,SwiperItem:o.a},data:function(){return{isStatus:!1,list2:["试验物料","维修物料"],index:0,demo2:"试验物料",MaterialEngineer_testallotList:[],searchText:"",islistData:!1,MaterialEngineer_maintainallotList:[],islistDataIndex:!1,searchTextIndex:""}},mounted:function(){this.$emit("setHeaderShow",{blod:!0,title:"物料分配"}),this.getMaterialEngineer_testallotList(1,"",12),this.getMaterialEngineer_maintainallotList(1,"",12)},methods:{AllocationMaterialDetail:function(t,a){this.$router.push({name:"AllocationMaterialDetail",query:{projectID:t.id,flag:a}})},getMaterialEngineer_testallotList:function(t,a,e,i,s,n){var l=this;this.$vux.loading.show(),this.$http.get(1==t?this.$conf.env.getMaterialEngineer_testallotList+"?search="+a+"&page_size="+e:this.$conf.env.getMaterialEngineer_testallotList+"?search="+a+"&p="+t+"&page_size="+e).then(function(e){a?n(e.data.results):l.MaterialEngineer_testallotList=1==t?e.data.results:l.MaterialEngineer_testallotList.concat(e.data.results),1!=t?e.data.next?i():s():e.data.next?l.$refs.mainList.scrollpullupStatus(!1):l.$refs.mainList.scrollpullupStatus(!0),l.islistData=!(l.MaterialEngineer_testallotList.length>0),l.$vux.loading.hide()}).catch(function(t){l.$vux.loading.hide(),l.$refs.mainList.scrollpullupStatus(!0),l.$vux.toast.text(t.response?t.response.data:"服务器错误","top")})},getMaterialEngineer_maintainallotList:function(t,a,e,i,s,n){var l=this;this.$vux.loading.show(),this.$http.get(1==t?this.$conf.env.getMaterialEngineer_maintainallotList+"?search="+a+"&page_size="+e:this.$conf.env.getMaterialEngineer_maintainallotList+"?search="+a+"&p="+t+"&page_size="+e).then(function(e){a?n(e.data.results):l.MaterialEngineer_maintainallotList=1==t?e.data.results:l.MaterialEngineer_maintainallotList.concat(e.data.results),1!=t?e.data.next?i():s():e.data.next?l.$refs.mainListIndex.scrollpullupStatus(!1):l.$refs.mainListIndex.scrollpullupStatus(!0),l.islistDataIndex=!(l.MaterialEngineer_maintainallotList.length>0),l.$vux.loading.hide()}).catch(function(t){l.$vux.loading.hide(),l.$refs.mainListIndex.scrollpullupStatus(!0),l.$vux.toast.text(t.response?t.response.data:"服务器错误","top")})},loadmore:function(t,a,e){0==this.index?this.getMaterialEngineer_testallotList(t,this.searchText,12,function(){a()},function(){e()}):this.getMaterialEngineer_maintainallotList(t,this.searchTextIndex,12,function(){a()},function(){e()})},searchList:function(t){var a=this;0==this.index?(this.searchText=t,this.getMaterialEngineer_testallotList(1,t,500,function(){},function(){},function(t){a.MaterialEngineer_testallotList=t})):(this.searchTextIndex=t,this.getMaterialEngineer_maintainallotList(1,t,500,function(){},function(){},function(t){a.MaterialEngineer_maintainallotList=t}))}},watch:{index:function(){0==this.index?this.$refs.searchList.setValue(this.searchText):this.$refs.searchList.setValue(this.searchTextIndex)}}}),u={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"AllocationMaterial body_main"},[i("Search",{ref:"searchList",on:{searchList:t.searchList}}),t._v(" "),i("div",{staticClass:"swiper_box"},[i("tab",{attrs:{"line-width":2,"active-color":"#07A695","custom-bar-width":"1.8rem"},model:{value:t.index,callback:function(a){t.index=a},expression:"index"}},t._l(t.list2,function(a,e){return i("tab-item",{key:e,staticClass:"vux-center",attrs:{selected:t.demo2===a},on:{click:function(e){t.demo2=a}}},[t._v(t._s(a))])}),1),t._v(" "),i("swiper",{attrs:{"show-dots":!1,heigh:"calc(100% - 1rem)"},model:{value:t.index,callback:function(a){t.index=a},expression:"index"}},[i("swiper-item",[i("main-list",{ref:"mainList",attrs:{islistData:t.islistData},on:{loadmore:t.loadmore}},[t._l(t.MaterialEngineer_testallotList,function(a,s){return i("li",{key:s,on:{click:function(e){return t.AllocationMaterialDetail(a,!0)}}},[i("div",{staticClass:"firstChild ststusTextTrue"},[i("span",{staticClass:"projectNumber"},[t._v(t._s(a.experiment_num))])]),t._v(" "),i("div",{staticClass:"twoChild equilpmentName"},[i("span",[t._v("试验名称："+t._s(a.name))])]),t._v(" "),i("div",{staticClass:"Time thereChild"},[i("i"),i("span",{staticClass:"time_end"},[t._v("试验性质："+t._s(a.project_type))]),i("span",{staticClass:"name"},[i("img",{attrs:{src:e("j+G4"),alt:""}}),i("p",[t._v(t._s(a.engineer))])]),i("span",{staticClass:"location"},[i("img",{attrs:{src:e("3BUj"),alt:""}}),i("p",[t._v(t._s(a.room))])])])])})],2)],1),t._v(" "),i("swiper-item",[i("main-list",{ref:"mainListIndex",attrs:{islistData:t.islistDataIndex},on:{loadmore:t.loadmore}},[t._l(t.MaterialEngineer_maintainallotList,function(a){return i("li",{key:a.id,on:{click:function(e){return t.AllocationMaterialDetail(a,!1)}}},[i("div",{staticClass:"firstChild ststusTextTrue"},[i("span",{staticClass:"projectNumber"},[t._v(t._s(a.num))])]),t._v(" "),i("div",{staticClass:"twoChild equilpmentName"},[i("span",[t._v("设备名称："+t._s(a.name))])]),t._v(" "),i("div",{staticClass:"Time thereChild"},[i("span",{staticClass:"name"},[i("img",{attrs:{src:e("j+G4"),alt:""}}),i("p",{staticClass:"nameLoad"},[t._v(t._s(a.applicant))])]),i("span",{staticClass:"location"},[i("img",{attrs:{src:e("3BUj"),alt:""}}),i("p",[t._v(t._s(a.room))])])])])})],2)],1)],1)],1)],1)},staticRenderFns:[]};var d=e("VU/8")(c,u,!1,function(t){e("YHVP")},null,null);a.default=d.exports}});
//# sourceMappingURL=40.8d31276d5026f42887b4.js.map